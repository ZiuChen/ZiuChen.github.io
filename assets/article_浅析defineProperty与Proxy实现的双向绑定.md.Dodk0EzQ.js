import{_ as s,c as i,o as a,ai as e}from"./chunks/framework.BFSS5Pox.js";const g=JSON.parse('{"title":"æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š","description":"","frontmatter":{},"headers":[],"relativePath":"article/æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š.md","filePath":"article/æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š.md","lastUpdated":1712396183000}'),n={name:"article/æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š.md"},t=e(`<h1 id="æµ…ædefinepropertyä¸proxyå®ç°çš„åŒå‘ç»‘å®š" tabindex="-1">æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š <a class="header-anchor" href="#æµ…ædefinepropertyä¸proxyå®ç°çš„åŒå‘ç»‘å®š" aria-label="Permalink to &quot;æµ…ædefinePropertyä¸Proxyå®ç°çš„åŒå‘ç»‘å®š&quot;">â€‹</a></h1><blockquote><p>æ–‡ç« å†…å®¹æ€»ç»“è‡ªVueå®˜ç½‘ <a href="https://cn.vuejs.org/v2/guide/reactivity.html#%E5%A6%82%E4%BD%95%E8%BF%BD%E8%B8%AA%E5%8F%98%E5%8C%96" target="_blank" rel="noreferrer">æ·±å…¥å“åº”å¼åŸç†</a></p></blockquote><h2 id="ğŸ”°-vue2çš„å“åº”å¼åŸç†" tabindex="-1">ğŸ”° Vue2çš„å“åº”å¼åŸç† <a class="header-anchor" href="#ğŸ”°-vue2çš„å“åº”å¼åŸç†" aria-label="Permalink to &quot;ğŸ”° Vue2çš„å“åº”å¼åŸç†&quot;">â€‹</a></h2><p><img src="https://v2.cn.vuejs.org/images/data.png" alt="image.png" loading="lazy"></p><blockquote><p>å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸ºÂ <code>data</code>Â é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„ propertyï¼Œå¹¶ä½¿ç”¨Â <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noreferrer"><code>Object.defineProperty</code></a>Â æŠŠè¿™äº› property å…¨éƒ¨è½¬ä¸ºÂ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects#%E5%AE%9A%E4%B9%89_getters_%E4%B8%8E_setters" target="_blank" rel="noreferrer">getter/setter</a>ã€‚</p><p>æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ªÂ <strong>watcher</strong>Â å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ® property è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥ watcherï¼Œä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p></blockquote><p>Vue2çš„å“åº”å¼åŸç†ï¼Œåˆ©ç”¨çš„æ˜¯ <code>Object.defineProperty()</code> çš„ <code>setter</code> å±æ€§ï¼š</p><p><code>defineProperty()</code> æ–¹æ³•ç”¨äº<strong>ç²¾ç¡®</strong>å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œèƒ½å¤ŸæŒ‡å®šå±æ€§çš„å„ç§ç‰¹å¾ï¼Œå…¶ä¸­çš„ <code>set</code> å±æ€§èƒ½å¤Ÿä¸ºå¯¹è±¡æŒ‡å®šä¸€ä¸ª <code>setter</code> å‡½æ•°ï¼Œæ¯æ¬¡è¯¥å±æ€§çš„å€¼å‘ç”Ÿä¿®æ”¹ï¼Œå°±ä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚</p><blockquote><p>æ›´å¤šå¯ä»¥é…ç½®çš„å±æ€§è¯·å‚çœ‹ï¼š<a href="https://juejin.cn/post/7088335075061792782" target="_blank" rel="noreferrer">ä»€ä¹ˆæ˜¯å¯¹è±¡çš„æ•°æ®å±æ€§æè¿°ç¬¦ï¼Ÿå­˜å‚¨å±æ€§æè¿°ç¬¦ï¼Ÿ</a></p></blockquote><p>è¿™ä¹Ÿæ˜¯Vue2å®ç°å“åº”å¼æ•°æ®ã€æ•°æ®åŒå‘ç»‘å®šçš„åŸç†ã€‚</p><p>å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•å®ç°ä¸€ä¸ªç®€å•çš„æ•°æ®åŒå‘ç»‘å®šçš„Demoï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f241135dbeb04e829fe6897c2e418aa2~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p><ul><li>è¾“å…¥æ¡†å†…çš„å†…å®¹æ”¹å˜ï¼Œ<code>.vBox</code> å±•ç¤ºçš„æ–‡æœ¬ä¼šéšä¹‹æ”¹å˜ã€‚</li><li>ç‚¹å‡»æŒ‰é’®ä¿®æ”¹ <code>vm.text</code>ï¼Œè¾“å…¥æ¡†å†…çš„å€¼å’Œ <code>.vBox</code> çš„æ–‡æœ¬éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</li></ul><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, World.&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Modify vm.text&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vBox&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å®šä¹‰å“åº”å¼æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vm, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å¯¹è±¡å±æ€§å€¼è¢«ä¿®æ”¹æ—¶ï¼Œsetterå‡½æ•°è¢«è‡ªåŠ¨è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.vBox&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ç›‘å¬è¾“å…¥è¡Œä¸º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        vm.text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.target.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>é€šè¿‡ <code>defineProperty</code> å®ç°çš„å“åº”å¼ï¼Œ<strong>ä¸èƒ½æ£€æµ‹</strong>æ•°ç»„å’Œå¯¹è±¡çš„å˜åŒ–ï¼š</p><p><strong>å¯¹äºå¯¹è±¡ï¼š</strong></p><p>Vue æ— æ³•æ£€æµ‹ property çš„æ·»åŠ æˆ–ç§»é™¤ã€‚</p><p>var vm = new Vue({ data:{ a:1 } }) // <code>vm.a</code> æ˜¯å“åº”å¼çš„ vm.b = 2 // <code>vm.b</code> æ˜¯éå“åº”å¼çš„</p><p><strong>å¯¹äºæ•°ç»„ï¼š</strong></p><ol><li>å½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶ï¼Œä¾‹å¦‚ï¼š<code>vm.items[indexOfItem] = newValue</code></li><li>å½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼š<code>vm.items.length = newLength</code></li></ol><h2 id="ğŸ”°-vue3çš„å“åº”å¼åŸç†" tabindex="-1">ğŸ”° Vue3çš„å“åº”å¼åŸç† <a class="header-anchor" href="#ğŸ”°-vue3çš„å“åº”å¼åŸç†" aria-label="Permalink to &quot;ğŸ”° Vue3çš„å“åº”å¼åŸç†&quot;">â€‹</a></h2>`,20),p=[t];function l(h,r,k,E,d,o){return a(),i("div",null,p)}const y=s(n,[["render",l]]);export{g as __pageData,y as default};
